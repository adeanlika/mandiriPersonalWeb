# mandiriPersonalWeb

CICD High Level Architecture

Below is the high level architecture of CI/CD pipeline that i've created for quick and continous deployments.

![image](https://user-images.githubusercontent.com/16234973/64489785-3565f800-d281-11e9-86c4-c6e6177dd2d1.png)

This project will shows the implementation of CI/CD pipeline for containerized applications using Jenkins in Kubernetes Engine(GCP).

**Understanding the Code**

**1. Dockerfile**

In this project I've created simple web application using Java Spring Framework, so for the dockerfile in the first line i've specifies that our container image should be created from the Google App Engine Jetty 9 image base image.
Then it will creates a volume in the container's file system with the path of /tmp. The third command, adds the Jar file, mandiriPersonalLabs-0.0.1-SNAPSHOT.jar generated by the Maven packaging process as part of the build process.
And the last command will executes when the container runs.

**2. CICD Architecture**


-**Get code from Git**
Developer pushes code to Git, which triggers a Jenkins to build webhook. for the code branching management itself I proposed below code repository flow :
![image](https://user-images.githubusercontent.com/16234973/64490525-e53e6400-d287-11e9-932c-6768b29b5d1d.png)

-**Code scan**. other than that after developer compile the code there's code scan running by code scanning tools e.g sonarcube.

-**Run build and unit tests**
Applicationâ€™s Docker image is created during the build.For this regression test I've mapped the depoyment environment into 3 clusters
1. Development Environment
2. Stagging Environment
3. Production Environment

This is intended to ensure clean code on each branch, testing activity must be conducted before merging code to higher environment
The application will only deployed to the production cluster if the application already meets the defined criteria.
If the desired conditions are not met then we can  easily perform a rollback.

**3. Jenkinsfile**

To run the pipeline for every branch. I use the Jenkins Multibranch pipeline job. for the jenkinsfile details can be seen on the codesnipet.
![image](https://user-images.githubusercontent.com/16234973/64490436-f175f180-d286-11e9-9d73-183b69811184.png)

**4. Result**

**Deployment result**
![image](https://user-images.githubusercontent.com/16234973/64490330-fd14e880-d285-11e9-965e-bb2d2844415d.png)

**Services and Ingress**
p.s for the detail yaml file can be seen on the code snapshot.
![image](https://user-images.githubusercontent.com/16234973/64490350-46653800-d286-11e9-91f5-ab63449672e1.png)

**Deployed Website**
![image](https://user-images.githubusercontent.com/16234973/64490368-6b59ab00-d286-11e9-911a-b0a067f4c1bd.png)

